# Brian Coder Environment Variables
# Copied from .env.example and populated with your keys

# ============================================================
# Brian Coder Settings
# ============================================================
# Rate limiting (seconds between API calls, 0 to disable)
# Default: 5
RATE_LIMIT_DELAY=5

# Maximum ReAct loop iterations
# Default: 100
MAX_ITERATIONS=100

# API timeout in seconds (how long to wait for API response)
# Default: 60
API_TIMEOUT=60

# Save conversation history
# Default: true
SAVE_HISTORY=true
HISTORY_FILE=conversation_history.json

# Debug mode - show detailed parsing and execution info
# Default: false
DEBUG_MODE=true

# Tool result preview settings
TOOL_RESULT_PREVIEW_LINES=3
TOOL_RESULT_PREVIEW_CHARS=300

# Large File Handling
MAX_OBSERVATION_CHARS=20000
LARGE_FILE_PREVIEW_LINES=100

# ============================================================
# Context Management
# ============================================================
# Approximate token limit (1 token ~= 4 chars)
# Default: 262144 chars (~65K tokens)
#MAX_CONTEXT_CHARS=262144*2
MAX_CONTEXT_CHARS=512000

# Threshold to trigger compression (0.0 to 1.0)
# Default: 0.8 (80%)
COMPRESSION_THRESHOLD=0.8

# Enable/Disable compression
# Default: true
ENABLE_COMPRESSION=true

# Compression mode: 'single' or 'chunked'
COMPRESSION_MODE=single

# Chunk size for chunked compression
COMPRESSION_CHUNK_SIZE=10

# Number of recent messages to keep unchanged during compression
COMPRESSION_KEEP_RECENT=4

# Enable Smart Compression (selective preservation)
# Default: true
ENABLE_SMART_COMPRESSION=true

# ============================================================
# Prompt Caching Configuration
# ============================================================
# Enable Anthropic Prompt Caching (manual control only)
# Default: false
# NOTE: 90% cost reduction on cached tokens!
ENABLE_PROMPT_CACHING=true

# Caching Optimization Mode
# Options: legacy | optimized
# - legacy: Single-string system message (current behavior, safe fallback)
# - optimized: Multi-block system message (40-50% additional cost reduction!)
# Default: legacy
# Recommended: optimized (when using Anthropic Claude models)
CACHE_OPTIMIZATION_MODE=optimized

# ============================================================
# Feature Flags
# ============================================================
ENABLE_VERILOG_TOOLS=true

# ============================================================
# Plan Mode (Interactive)
# ============================================================
# Plan output directory
PLAN_DIR=~/.brian_coder/plans

# Plan mode debug output
PLAN_MODE_DEBUG=true
PLAN_MODE_DEBUG_FULL=false
PLAN_MODE_STREAM=true

# Context injection for Plan Mode: full | summary | recent
PLAN_MODE_CONTEXT_MODE=full
PLAN_MODE_CONTEXT_RECENT_N=12
PLAN_MODE_CONTEXT_INCLUDE_SYSTEM=false
# Max chars for injected context (0 = no limit)
PLAN_MODE_CONTEXT_MAX_CHARS=0

# ============================================================
# Memory System Configuration
# ============================================================
# Enable/Disable memory system
ENABLE_MEMORY=false
MEMORY_DIR=.brian_memory
ENABLE_AUTO_EXTRACT=true

# ============================================================
# Graph Lite Configuration
# ============================================================
# Enable/Disable graph system
ENABLE_GRAPH=false
GRAPH_AUTO_EXTRACT=true
GRAPH_SEARCH_LIMIT=5
GRAPH_SIMILARITY_THRESHOLD=0.5
GRAPH_EXTRACTION_MESSAGES=10

# ============================================================
# A-MEM Configuration (Auto-Linking)
# ============================================================
AMEM_SIMILARITY_THRESHOLD=0.5
AMEM_MAX_CANDIDATES=10
AMEM_LINK_TEMPERATURE=0.3

# ============================================================
# ACE Credit Assignment Configuration
# ============================================================
ENABLE_CREDIT_TRACKING=false
NODE_QUALITY_THRESHOLD=-0.3

# ============================================================
# Knowledge Curator Configuration
# ============================================================
ENABLE_CURATOR=false
CURATOR_INTERVAL=10
CURATOR_PRUNE_DAYS=30
CURATOR_HARMFUL_THRESHOLD=2

# ============================================================
# Hybrid Search Configuration
# ============================================================
SEARCH_METHOD=hybrid
HYBRID_ALPHA=0.8

# ============================================================
# RAG Auto-Indexing Configuration
# ============================================================
ENABLE_RAG_AUTO_INDEX=false
RAG_FINE_GRAINED=false
RAG_RATE_LIMIT_DELAY_MS=100

# ============================================================
# Smart RAG Decision Configuration
# ============================================================
ENABLE_SMART_RAG=false
SMART_RAG_HIGH_THRESHOLD=0.50


SMART_RAG_TOP_K=3
SMART_RAG_LLM_JUDGE=true

# ============================================================
# Procedural Memory Configuration
# ============================================================
ENABLE_PROCEDURAL_MEMORY=false
PROCEDURAL_RETRIEVE_LIMIT=3
PROCEDURAL_SIMILARITY_THRESHOLD=0.5
PROCEDURAL_INJECT_GUIDANCE=true

# Disable Deep Think (Hypothesis Branching)
ENABLE_DEEP_THINK=false

DEBUG_RAG=false
ENABLE_SUB_AGENTS=false
FULL_PROMPT_DEBUG=true

# ============================================================
# SubAgent Debug Configuration
# ============================================================
# Enable detailed SubAgent debug logging (color-coded, verbose)
# Shows: parsing details, error checks, stall detection, tool calls
# Default: false
DEBUG_SUBAGENT=true

# ============================================================
# Tool Description System (OpenCode Integration)
# ============================================================
# Enable detailed tool descriptions from .txt files
# Default: true
ENABLE_TOOL_DESCRIPTIONS=true

# Limit Full Prompt Debug output messages
FULL_PROMPT_DEBUG_LIMIT_ENABLED=true
FULL_PROMPT_DEBUG_LIMIT_COUNT=5

# Limit lines per message in Full Prompt Debug
FULL_PROMPT_DEBUG_LINE_LIMIT_ENABLED=true
FULL_PROMPT_DEBUG_LINE_LIMIT_COUNT=20
